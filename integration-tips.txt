main things to keep in mind for applying kbar functionality in osm-iD

1. Respect iDâ€™s mode-driven architecture

iD lives and breathes modes (browse, add-point, draw-line, etc.).

Keep in mind:

kbar actions should almost always enter a mode, not do heavy logic themselves.

Your onSelect should usually look like:

context.enter(modeAddPoint(context))


Never bypass mode logic just to â€œdo the thing fasterâ€.

ğŸ‘‰ If it doesnâ€™t map cleanly to a mode, it probably doesnâ€™t belong in kbar.




2. Actions must be context-aware

iD is stateful: selection, geometry, zoom, permissions, etc.

Before registering an action, think:

Does this action require a selection?

Does it only make sense for nodes / ways / areas?

Should it be disabled in read-only mode?

Rule of thumb:
If a button would be disabled in the UI, the kbar action should be hidden or disabled too.