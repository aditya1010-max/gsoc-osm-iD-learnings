main things to keep in mind for applying kbar functionality in osm-iD

1. Respect iDâ€™s mode-driven architecture

iD lives and breathes modes (browse, add-point, draw-line, etc.).

Keep in mind:

kbar actions should almost always enter a mode, not do heavy logic themselves.

Your onSelect should usually look like:

context.enter(modeAddPoint(context))


Never bypass mode logic just to â€œdo the thing fasterâ€.

ğŸ‘‰ If it doesnâ€™t map cleanly to a mode, it probably doesnâ€™t belong in kbar.




2. Actions must be context-aware

iD is stateful: selection, geometry, zoom, permissions, etc.

Before registering an action, think:

Does this action require a selection?

Does it only make sense for nodes / ways / areas?

Should it be disabled in read-only mode?

Rule of thumb:
If a button would be disabled in the UI, the kbar action should be hidden or disabled too.




3. Donâ€™t duplicate existing shortcuts or UI

iD already has:

Keyboard shortcuts

Menus

Toolbars

kbar is for:

Discoverability

Speed for advanced users

Commands that are annoying to dig for

If something already has a perfect shortcut, adding it to kbar is optionalâ€”not mandatory.




4. Follow iD naming + UX conventions

kbar actions should sound like iD actions.

Good:

â€œAdd Pointâ€

â€œDraw Lineâ€

â€œSplit Wayâ€

Bad:

â€œCreate a node hereâ€

â€œInitiate polyline creationâ€

Consistency matters because iD is used by thousands of contributors under the OpenStreetMap umbrella.